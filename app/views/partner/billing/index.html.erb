<h1><%= t('.billing_header') %></h1>

<% if user_signed_in? %>
  <div class="mt-2 mb-2">
    <%= form_tag partner_billing_index_path, method: :get do %>
      <%= select_tag "month", options_for_select(Partner::BillingController::MONTHS.map { |k,v| [v,k] },
      params[:month]||Time.now.month), onchange: 'this.form.submit()', class: 'mt-2' %>
      <%= submit_tag 'submit', {style: 'display: none;'} %>
    <% end %>
  </div>
<% end %>

<ul class="list-group mt-2 border-0" style="box-shadow: 0 0 1px 0 rgba(42, 42, 42, 0.4), 0 3px 4px 0 rgba(42, 42, 42, 0.2);">
  <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: #eee;">
    <div class="col"><h5 class="card-title">Total</h5></div>
    <div class="col">
    <h5 class="card-title">
      <span class="badge badge-success badge-pill">
        +<%= number_to_currency(@orders.sum { |order| order.items_total_price }, locale: I18n.locale) %>
      </span>
    </h5>
    </div>
    <div class="col">
    <h5 class="card-title">
      <span class="badge badge-primary badge-pill">
        -<%= number_to_currency(@orders.sum { |order| order.items_total_price * Partner::BillingController::RATE }, locale: I18n.locale) %>
      </span>
    </h5>
    </div>
  </li>
  <% @orders.each do |order| %>
    <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: #eee;">
      <div class="col"><h5 class="card-title"><%= t('.order_number') %>#<%= order.id %></h5></div>
      <div class="col">
      <h5 class="card-title">
        <span class="badge badge-success badge-pill">
          +<%= number_to_currency(order.items_total_price, locale: I18n.locale) %>
        </span>
      </h5>
      </div>
      <div class="col">
      <h5 class="card-title">
        <span class="badge badge-primary badge-pill">
          -<%= number_to_currency(order.items_total_price * Partner::BillingController::RATE, locale: I18n.locale) %>
        </span>
      </h5>
      </div>
    </li>
  <% end %>
</ul>
